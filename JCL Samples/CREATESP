DROP PROCEDURE  EMPL_DEPTS_NAT;
 --#SET TERMINATOR #
CREATE PROCEDURE EMPL_DEPTS_NAT
     (IN WHICHQUERY INTEGER, IN DEPT1 CHARACTER(3), IN DEPT2
CHARACTER(3))
VERSION V1
           RESULT SETS 1
     LANGUAGE SQL
     ISOLATION LEVEL CS
     DISABLE DEBUG MODE
P1: BEGIN
DECLARE CURSOR1 CURSOR WITH RETURN FOR
     SELECT EMPLOYEE.EMPNO AS "employeeNumber",
            EMPLOYEE.FIRSTNME AS "firstName",
            EMPLOYEE.MIDINIT AS "middleInitial",
            EMPLOYEE.LASTNAME AS "lastName",
            EMPLOYEE.WORKDEPT AS "department",
            EMPLOYEE.PHONENO AS "phoneNumber"
            FROM USER1.EMPLOYEE AS EMPLOYEE
            WHERE EMPLOYEE.WORKDEPT=DEPT1
            ORDER BY EMPLOYEE.EMPNO ASC;
DECLARE CURSOR2 CURSOR WITH RETURN FOR
     SELECT EMPLOYEE.EMPNO AS "employeeNumber",
            EMPLOYEE.FIRSTNME AS "firstName",
            EMPLOYEE.MIDINIT AS "middleInitial",
            EMPLOYEE.LASTNAME AS "lastName",
            EMPLOYEE.WORKDEPT AS "department",
            EMPLOYEE.PHONENO AS "phoneNumber"
            FROM USER1.EMPLOYEE AS EMPLOYEE
         WHERE EMPLOYEE.WORKDEPT>=DEPT1 AND EMPLOYEE.WORKDEPT<=DEPT2
            ORDER BY EMPLOYEE.WORKDEPT ASC, EMPLOYEE.EMPNO ASC;
CASE WHICHQUERY
    WHEN 1 THEN
        OPEN CURSOR1;
    ELSE
        OPEN CURSOR2;
END CASE;
END P1#
